? ocamlbuild.snowflake.patch
Index: ocamlbuild/ocaml_compiler.ml
===================================================================
RCS file: /caml/ocaml/ocamlbuild/ocaml_compiler.ml,v
retrieving revision 1.10
diff -w -r1.10 ocaml_compiler.ml
119a120,122
>   if Tags.mem "native" (tags_of_pathname mli) then
>     ocamlopt_c (tags_of_pathname mli++"interf") mli cmi
>   else
Index: ocamlbuild/ocaml_specific.ml
===================================================================
RCS file: /caml/ocaml/ocamlbuild/ocaml_specific.ml,v
retrieving revision 1.23
diff -w -r1.23 ocaml_specific.ml
308c308,312
<     let cc = Cmd(S[!Options.ocamlc; T(tags_of_pathname c++"c"++"compile"); A"-c"; Px c]) in
---
>     let cc = 
>       if Tags.mem "native" (tags_of_pathname c) then
>         Cmd(S[!Options.ocamlopt; T(tags_of_pathname c++"c"++"compile"); A"-c"; Px c])
>       else
>         Cmd(S[!Options.ocamlc; T(tags_of_pathname c++"c"++"compile"); A"-c"; Px c]) in
Index: driver/main_args.ml
===================================================================
RCS file: /caml/ocaml/driver/main_args.ml,v
retrieving revision 1.49
diff -w -r1.49 main_args.ml
163a164,164
>   "-freestanding", Arg.Unit ignore, " (ignored)";
